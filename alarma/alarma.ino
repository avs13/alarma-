
#include <Wire.h>
#include <Adafruit_GFX.h>   
#include <Adafruit_SSD1306.h> 
#include <EEPROM.h>

#define ANCHO             128
#define ALTO              64    
#define OLED_RESET        4
#define CE_PIN            9
#define CSN_PIN           10
#define UP                2
#define ENTER             3
#define DOWN              4
const unsigned char configuracion2 [] PROGMEM = {
  // 'descarga (1), 40x40px
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 
  0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xfe, 
  0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0x7f, 0xff, 0xfc, 0xf8, 0x00, 0x1f, 0x3f, 0xf8, 0x00, 0xff, 
  0x00, 0x1f, 0xf8, 0x03, 0xff, 0xc0, 0x1f, 0xf0, 0x07, 0xff, 0xe0, 0x0f, 0xf0, 0x0f, 0xff, 0xf0, 
  0x0f, 0xe0, 0x1f, 0x81, 0xf8, 0x07, 0xe0, 0x3e, 0x00, 0x78, 0x07, 0xf0, 0x3c, 0x3c, 0x3c, 0x0f, 
  0xf8, 0x7c, 0x7e, 0x3c, 0x1f, 0xfc, 0x78, 0xff, 0x1e, 0x3f, 0xfe, 0x79, 0xff, 0x9e, 0x3f, 0xfe, 
  0x79, 0xff, 0x9e, 0x3f, 0xfe, 0x79, 0xff, 0x9e, 0x3f, 0xfe, 0x79, 0xff, 0x9e, 0x3f, 0xfc, 0x78, 
  0xff, 0x1c, 0x3f, 0xf8, 0x7c, 0x7e, 0x1c, 0x1f, 0xf0, 0x3c, 0x3c, 0x3c, 0x0f, 0xe0, 0x3e, 0x00, 
  0x78, 0x07, 0xe0, 0x1f, 0x80, 0xf8, 0x07, 0xf0, 0x0f, 0xff, 0xf0, 0x07, 0xf0, 0x07, 0xff, 0xe0, 
  0x0f, 0xf8, 0x01, 0xff, 0x80, 0x1f, 0xf8, 0x00, 0x7e, 0x00, 0x1f, 0xfc, 0xf8, 0x00, 0x1f, 0x3f, 
  0xff, 0xfe, 0x00, 0x7f, 0xff, 0xff, 0xfe, 0x00, 0x7f, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 
  0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};
const unsigned char configuracion [] PROGMEM = {
  // 'descarga (1), 40x40px
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x01, 
  0xff, 0x00, 0x00, 0x00, 0x01, 0xff, 0x80, 0x00, 0x03, 0x07, 0xff, 0xe0, 0xc0, 0x07, 0xff, 0x00, 
  0xff, 0xe0, 0x07, 0xfc, 0x00, 0x3f, 0xe0, 0x0f, 0xf8, 0x00, 0x1f, 0xf0, 0x0f, 0xf0, 0x00, 0x0f, 
  0xf0, 0x1f, 0xe0, 0x7e, 0x07, 0xf8, 0x1f, 0xc1, 0xff, 0x87, 0xf8, 0x0f, 0xc3, 0xc3, 0xc3, 0xf0, 
  0x07, 0x83, 0x81, 0xc3, 0xe0, 0x03, 0x87, 0x00, 0xe1, 0xc0, 0x01, 0x86, 0x00, 0x61, 0xc0, 0x01, 
  0x86, 0x00, 0x61, 0xc0, 0x01, 0x86, 0x00, 0x61, 0xc0, 0x01, 0x86, 0x00, 0x61, 0xc0, 0x03, 0x87, 
  0x00, 0xe3, 0xc0, 0x07, 0x83, 0x81, 0xe3, 0xe0, 0x0f, 0xc3, 0xc3, 0xc3, 0xf0, 0x1f, 0xc1, 0xff, 
  0x87, 0xf8, 0x1f, 0xe0, 0x7f, 0x07, 0xf8, 0x0f, 0xf0, 0x00, 0x0f, 0xf8, 0x0f, 0xf8, 0x00, 0x1f, 
  0xf0, 0x07, 0xfe, 0x00, 0x7f, 0xe0, 0x07, 0xff, 0x81, 0xff, 0xe0, 0x03, 0x07, 0xff, 0xe0, 0xc0, 
  0x00, 0x01, 0xff, 0x80, 0x00, 0x00, 0x01, 0xff, 0x80, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 
  0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char mas [] PROGMEM = {
  // 'masmams, 40x40px
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 
  0x01, 0xff, 0x00, 0x00, 0x00, 0x01, 0xff, 0x00, 0x00, 0x00, 0x01, 0xff, 0x00, 0x00, 0x00, 0x01, 
  0xc7, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 
  0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 
  0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x1f, 0xff, 0x83, 0xff, 0xf0, 
  0x3f, 0xff, 0x83, 0xff, 0xf8, 0x7e, 0x00, 0x00, 0x00, 0xfc, 0x7c, 0x00, 0x00, 0x00, 0x7c, 0x7c, 
  0x00, 0x00, 0x00, 0x7c, 0x7e, 0x00, 0x00, 0x00, 0x7c, 0x7e, 0x00, 0x00, 0x00, 0xfc, 0x3f, 0xff, 
  0x83, 0xff, 0xf8, 0x1f, 0xff, 0x83, 0xff, 0xf0, 0x00, 0x01, 0x83, 0x80, 0x00, 0x00, 0x01, 0x83, 
  0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 
  0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0x83, 0x00, 0x00, 0x00, 0x01, 0xc3, 0x00, 0x00, 
  0x00, 0x01, 0xff, 0x00, 0x00, 0x00, 0x01, 0xff, 0x00, 0x00, 0x00, 0x01, 0xff, 0x00, 0x00, 0x00, 
  0x01, 0xff, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char mas2 [] PROGMEM = {
  // 'masmams, 40x40px
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x83, 0xff, 0xff, 0xff, 0xff, 0x01, 0xff, 0xff, 0xff, 
  0xfe, 0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0xff, 0xff, 0xff, 0xfe, 
  0x38, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 
  0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 
  0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xe0, 0x00, 0x7c, 0x00, 0x0f, 
  0xc0, 0x00, 0x7c, 0x00, 0x07, 0x81, 0xff, 0xff, 0xff, 0x03, 0x83, 0xff, 0xff, 0xff, 0x83, 0x83, 
  0xff, 0xff, 0xff, 0x83, 0x81, 0xff, 0xff, 0xff, 0x83, 0x81, 0xff, 0xff, 0xff, 0x03, 0xc0, 0x00, 
  0x7c, 0x00, 0x07, 0xe0, 0x00, 0x7c, 0x00, 0x0f, 0xff, 0xfe, 0x7c, 0x7f, 0xff, 0xff, 0xfe, 0x7c, 
  0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 
  0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x7c, 0xff, 0xff, 0xff, 0xfe, 0x3c, 0xff, 0xff, 
  0xff, 0xfe, 0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0xff, 0xff, 0xff, 
  0xfe, 0x00, 0xff, 0xff, 0xff, 0xff, 0x01, 0xff, 0xff, 0xff, 0xff, 0x83, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};

const unsigned char dispositivo2 [] PROGMEM = {
  // 'descarga (2), 40x40px
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xff, 0xff, 0xff, 0x80, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xf0, 0x0f, 0xff, 0xff, 0xff, 0xf0, 0x0f, 0xff, 0xff, 
  0xff, 0xf0, 0x0f, 0xff, 0xff, 0xff, 0xf0, 0x0e, 0x00, 0x00, 0x00, 0x70, 0x0e, 0x00, 0x00, 0x00, 
  0x70, 0xfe, 0x00, 0x00, 0x00, 0x70, 0xff, 0x80, 0x00, 0x00, 0x70, 0xff, 0xe0, 0x00, 0x00, 0x70, 
  0x1f, 0xf8, 0x00, 0x00, 0x70, 0x01, 0xfc, 0x00, 0x00, 0x70, 0x00, 0x7e, 0x00, 0x00, 0x70, 0x00, 
  0x1f, 0x80, 0x00, 0x70, 0xf0, 0x0f, 0xc0, 0x00, 0x70, 0xfe, 0x03, 0xc0, 0x00, 0x70, 0xff, 0x83, 
  0xe0, 0x00, 0x70, 0xff, 0xc1, 0xf0, 0x00, 0x70, 0x07, 0xe0, 0xf0, 0x00, 0x70, 0x01, 0xf0, 0x78, 
  0x00, 0x70, 0x00, 0xf8, 0x78, 0x00, 0x70, 0xc0, 0x7c, 0x3c, 0x00, 0x70, 0xf8, 0x3c, 0x3c, 0x00, 
  0x70, 0xfc, 0x1e, 0x1f, 0xff, 0xf0, 0xfe, 0x1e, 0x1f, 0xff, 0xf0, 0x1f, 0x0f, 0x1f, 0xff, 0xf0, 
  0x0f, 0x0f, 0x0f, 0xff, 0xf0, 0x07, 0x8f, 0x0f, 0x00, 0x00, 0x07, 0x87, 0x0f, 0x00, 0x00, 0x07, 
  0x87, 0x0f, 0x00, 0x01, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};
const unsigned char dispositivo [] PROGMEM = {
  // 'descarga (2), 40x40px
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0xff, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
  0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 
  0x00, 0x0f, 0xf0, 0x00, 0x00, 0x00, 0x0f, 0xf1, 0xff, 0xff, 0xff, 0x8f, 0xf1, 0xff, 0xff, 0xff, 
  0x8f, 0x01, 0xff, 0xff, 0xff, 0x8f, 0x00, 0x7f, 0xff, 0xff, 0x8f, 0x00, 0x1f, 0xff, 0xff, 0x8f, 
  0xe0, 0x07, 0xff, 0xff, 0x8f, 0xfe, 0x03, 0xff, 0xff, 0x8f, 0xff, 0x81, 0xff, 0xff, 0x8f, 0xff, 
  0xe0, 0x7f, 0xff, 0x8f, 0x0f, 0xf0, 0x3f, 0xff, 0x8f, 0x01, 0xfc, 0x3f, 0xff, 0x8f, 0x00, 0x7c, 
  0x1f, 0xff, 0x8f, 0x00, 0x3e, 0x0f, 0xff, 0x8f, 0xf8, 0x1f, 0x0f, 0xff, 0x8f, 0xfe, 0x0f, 0x87, 
  0xff, 0x8f, 0xff, 0x07, 0x87, 0xff, 0x8f, 0x3f, 0x83, 0xc3, 0xff, 0x8f, 0x07, 0xc3, 0xc3, 0xff, 
  0x8f, 0x03, 0xe1, 0xe0, 0x00, 0x0f, 0x01, 0xe1, 0xe0, 0x00, 0x0f, 0xe0, 0xf0, 0xe0, 0x00, 0x0f, 
  0xf0, 0xf0, 0xf0, 0x00, 0x0f, 0xf8, 0x70, 0xf0, 0xff, 0xff, 0xf8, 0x78, 0xf0, 0xff, 0xff, 0xf8, 
  0x78, 0xf0, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
byte direccion[5] ={'c','a','n','a','l'};

//RF24 radio(CE_PIN, CSN_PIN);

Adafruit_SSD1306 oled(ANCHO, ALTO, &Wire, OLED_RESET);
int menuPos = 1;
float datos[3];
void setup() {
  Serial.begin(9600);
  Wire.begin(); 
  oled.begin(SSD1306_SWITCHCAPVCC, 0x3C);
//  radio.begin();
  pinMode(2,INPUT);
  pinMode(3,INPUT);
  pinMode(4,INPUT);
  pinMode(5,INPUT);
  inicio();
 menu(menuPos);
//  radio.openWritingPipe(direccion);
}
void loop() {
button();
}
void menu(int posicion) {
  switch(posicion){
    case 0:
    menuPos = 1;
    Serial.println(menuPos);
    
    break;
    case 1:
    oled.clearDisplay();      
    oled.setTextColor(WHITE);   
    oled.setTextSize(1);      
    oled.setCursor(0, 0);     
    oled.drawBitmap(41,20,mas,40,40,WHITE);
    oled.drawBitmap(0,20,configuracion2,40,40,WHITE);
   oled.drawBitmap(81,20,dispositivo,40,40,WHITE);
    oled.display();
       Serial.println(menuPos);     
    break;

    case 2:
      oled.clearDisplay();      
      oled.setTextColor(WHITE);   
      oled.setTextSize(1);      
      oled.setCursor(0, 0);     
      oled.drawBitmap(41,20,mas2,40,40,WHITE);
      oled.drawBitmap(0,20,configuracion,40,40,WHITE);
      oled.drawBitmap(81,20,dispositivo,40,40,WHITE); 
      oled.display();     
      Serial.println(menuPos);
    break;

    case 3:
       oled.clearDisplay();      
      oled.setTextColor(WHITE);   
      oled.setTextSize(1);      
      oled.setCursor(0, 0);     
      oled.drawBitmap(41,20,mas,40,40,WHITE);
      oled.drawBitmap(0,20,configuracion,40,40,WHITE);
      oled.drawBitmap(81,20,dispositivo2,40,40,WHITE); 
      oled.display();     
      Serial.println(menuPos);
    break;
   
    case 4:
    oled.clearDisplay();      
    oled.setTextColor(WHITE);    
    oled.setTextSize(1);      
    oled.setCursor(0, 0);     
    oled.print("No se"); 
    oled.display();     
    break;
    case 5:
    menuPos = 4;
    break;
  }
}

void inicio(){
    oled.clearDisplay();      
    oled.setTextColor(WHITE);    
    oled.setTextSize(2);      
    oled.setCursor(5, 0);     
    oled.print("Bienvenido"); 
     oled.setCursor(10, 20);     
    oled.print("S.M.P.D.N ");
    oled.display();     
   
    delay(3000);
     oled.clearDisplay();      
    oled.setTextColor(WHITE);    
    oled.setTextSize(2);      
     oled.setCursor(5, 20);     
    oled.print("Sistema de Monitoreo");
    oled.display();     
   
  
}

void button(){
  if(digitalRead(2) == HIGH){
    menuPos = menuPos - 1;
    menu(menuPos);  
    Serial.println("2"); 
    delay(100);
    
    //while(!digitalRead(2));
  }
  if(digitalRead(3) == HIGH){
    menuPos = menuPos - 1;
    menu(menuPos);
    Serial.println("3"); 
    delay(100);
      while(1){
        if(digitalRead(3) == LOW){
        break;
        }
        delay(10);
   }
   
  }
  if(digitalRead(4) == HIGH){
     menuPos = menuPos + 1;
    menu(menuPos); 
    delay(100);
    Serial.println("4");
  //  while(!digitalRead(4));
    
  }
}
/*void envio(){
   bool ok = radio.write(datos, sizeof(datos));
   if(ok)
  {
     Serial.print("Datos enviados: "); 
     Serial.print(datos[0]); 
     Serial.print(" , "); 
     Serial.print(datos[1]); 
     Serial.print(" , "); 
     Serial.println(datos[2]); 
  }
  else
  {
     Serial.println("no se ha podido enviar");
  } 3ssa
  delay(100);
}*/
/*void calibracion(){
}*/
